<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Roblox Mobile Shop</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #f4f4f4;
    }

    header {
      background-color: #fff;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    h1 {
      font-size: 16px;
      margin: 0;
    }

    .robux-logo {
      display: flex;
      align-items: center;
      cursor: pointer;
      position: relative;
    }

    .robux-logo img {
      width: 14px;
      height: 14px;
      object-fit: contain;
      margin-right: 4px;
    }

    #robuxDropdown {
      position: absolute;
      top: 30px;
      right: 0;
      background: white;
      padding: 8px 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      border-radius: 6px;
      font-weight: bold;
      display: none;
      font-size: 14px;
    }

    main {
      padding: 16px;
    }

    .character {
      text-align: center;
      margin-bottom: 20px;
    }

    .character img {
      width: 120px;
      border-radius: 10px;
    }

    #owned-items {
      display: flex;
      justify-content: center;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    #owned-items img {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .item-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
    }

    .item {
      background-color: white;
      border-radius: 10px;
      padding: 12px;
      box-shadow: 0 1px 5px rgba(0,0,0,0.1);
    }

    .item img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      border-radius: 8px;
    }

    .item h3 {
      font-size: 14px;
      margin: 10px 0 6px;
    }

    .price-row {
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 14px;
    }

    .price-row img {
      width: 18px;
      height: 18px;
      object-fit: contain;
      margin-right: 4px;
    }

    .btn-buy {
      margin-top: 10px;
      padding: 8px;
      width: 100%;
      background: #28a745;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
    }

    .btn-buy:hover {
      background: #218838;
    }

    .bought-label {
      margin-top: 10px;
      text-align: center;
      color: gray;
      font-size: 13px;
    }
  </style>
</head>
<body>

<header>
  <h1>Roblox</h1>
  <div id="robuxToggle" class="robux-logo">
    <img src="images (2).png" alt="R">
    <span id="dropdown-robux-count">145,716</span>
    <div id="robuxDropdown">145,716 Robux</div>
  </div>
</header>

<main>
  <div class="character">
    <h2 style="font-size: 15px;">Karakter Kamu</h2>
    <img src="download (8).jpeg" alt="Karakter">
    <div id="owned-items">
      <!-- item muncul di sini -->
    </div>
  </div>

  <h2 style="font-size: 15px;">Item Tersedia</h2>
  <div id="item-container" class="item-grid">
    <!-- item dimuat lewat JS -->
  </div>
</main>

<script>
  const items = [
    { name: "Oldschool Animation Pack", price: 80, img: "noFilter (1).webp" },
    { name: "Messy Hair with Headphones (White)", price: 65, img: "noFilter.webp" },
    { name: "Chibi Stare Face", price: 75, img: "noFilter (3).webp" },
    { name: "Messy Hair w/ Headphones & Y2K Beanie", price: 95, img: "noFilter (2).webp" },
    { name: "Korblox Deathspeaker Right Leg", price: 17000, img: "jaja.webp" },
    { name: "Dominus", price: 618033988, img: "wsp.webp" },
    { name: "Rainbow Shaggy", price: 40000, img: "rainbowshaggy.webp" }
  ];

  let robux = parseInt(localStorage.getItem("robux")) || 145716;
  let ownedItems = JSON.parse(localStorage.getItem("ownedItems") || "[]");

  const dropdownCountEl = document.getElementById("dropdown-robux-count");
  const container = document.getElementById("item-container");
  const ownedContainer = document.getElementById("owned-items");

  function formatNumber(n) {
    return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  }

  function renderItems() {
    container.innerHTML = "";
    items.forEach((item, idx) => {
      const card = document.createElement("div");
      card.className = "item";
      const bought = ownedItems.includes(item.name);

      card.innerHTML = `
        <img src="${item.img}" alt="${item.name}">
        <h3>${item.name}</h3>
        <div class="price-row">
          <img src="images (2).png" alt="R">
          <div>${formatNumber(item.price)}</div>
        </div>
        ${bought 
          ? `<div class="bought-label">Sudah dibeli</div>` 
          : `<button class="btn-buy" onclick="buyItem(${idx}, this)">Beli</button>`}
      `;
      container.appendChild(card);
    });

    renderOwnedItems();
  }

  function renderOwnedItems() {
    ownedContainer.innerHTML = "";
    if (ownedItems.length === 0) {
      ownedContainer.innerHTML = "<i style='font-size:12px;color:gray;'>Belum ada item dibeli</i>";
      return;
    }
    items.forEach(item => {
      if (ownedItems.includes(item.name)) {
        const img = document.createElement("img");
        img.src = item.img;
        img.alt = item.name;
        ownedContainer.appendChild(img);
      }
    });
  }

  function buyItem(index) {
    const item = items[index];
    if (ownedItems.includes(item.name)) return;

    if (robux >= item.price) {
      robux -= item.price;
      ownedItems.push(item.name);

      localStorage.setItem("robux", robux);
      localStorage.setItem("ownedItems", JSON.stringify(ownedItems));

      dropdownCountEl.textContent = formatNumber(robux);
      renderItems();
    } else {
      alert("Robux tidak cukup!");
    }
  }

  const toggle = document.getElementById("robuxToggle");
  const dropdown = document.getElementById("robuxDropdown");
  toggle.addEventListener("click", (e) => {
    e.stopPropagation();
    dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
  });
  document.addEventListener("click", () => {
    dropdown.style.display = "none";
  });

  dropdownCountEl.textContent = formatNumber(robux);
  renderItems();
</script>

</body>
</html>
